---

# **Техническое задание (ТЗ)**

**Проект:** Dungeon Level Design Trainer  
**Платформа:** Браузер (Web)  
**Цель:** Обучение студентов левел-дизайну и гейм-дизайну через командное прохождение комнат.

---

## **1. Цели разработки**

1. Разработать браузерную игру с клиент-серверной архитектурой.
2. Обеспечить интерактивное обучение основам левел-дизайна через прохождение комнат.
3. Реализовать командное взаимодействие с ролями **Гейм-мастер** и **участник команды**.
4. Обеспечить гибкость реализации фронтенда на усмотрение разработчика.

---

## **2. Функциональные требования**

### **2.1. Пользовательские роли**

-   **Участник команды**

    -   Ввод имени
    -   Выбор команды (3 варианта)
    -   Выбор персонажа (из N картинок)
    -   Выбор класса персонажа (статы: ловкость, интеллект, сила и т.д.)
    -   Кнопка "готов/не готов" в лобби

-   **Гейм-мастер**

    -   Ввод имени
    -   Управление командами в лобби (перемещение участников, удаление участников, изменение названий команд)
    -   Кнопка "Начать игру" (доступна, только если все игроки готовы)
    -   Управление ходами команд и действиями участников

### **2.2. Игровой процесс**

-   **Этапы игры**:

    1. Ввод имени и выбор роли
    2. Настройка персонажа (участники)
    3. Этап ожидания начала игры
    4. Стартовая локация (выбор двери/пути)
    5. Поочередное прохождение уникальных и общих комнат
    6. Финальная комната и пост-финальный экран

-   **Ход команды в уникальных комнатах**:

    -   Команда выбирает действие
    -   ГМ выбирает игрока для действия
    -   Генерация результата с учётом статов:

        -   `< N/2` → провал, штраф, действие блокируется
        -   `N/2 ≤ x < 3N/4` → частичный успех, половина штрафа
        -   `≥ 3N/4` → идеальный успех

    -   Комната считается пройденной после успеха или провала всех действий
    -   ГМ получает описание примененного приема левел-дизайна

-   **Ход команды в общих комнатах**:

    -   Все команды выполняют общую цель, уникальные действия для каждой команды
    -   Ход для других команд отображается надписью "Ожидание хода", экран не затемняется
    -   Комната считается пройденной после достижения общего количества успешных действий

### **2.3. Интерфейс**

-   **Участник команды**:

    -   Левая панель: список участников команды с аватарками и статами
    -   Центр: задник комнаты, описание комнаты
    -   Правая панель: список действий (кнопки неактивны)
    -   Верхний бар: имя, команда, кнопка "готов/не готов"
    -   Нижний бар (для общих комнат): прогресс успешных действий

-   **Гейм-мастер**:

    -   Левая панель: команды и участники (управление перемещением)
    -   Центр: задник, описание комнаты, активные действия команд
    -   Верхний бар: имя ГМ, кнопка "Начать игру"
    -   Нижний бар: текущий ход, название команды, рандом и результат действия
    -   Кнопка "Далее": завершение хода и переход к следующей команде

---

## **3. Логика работы сервера**

1. Хранение всех данных: комнаты, действия, персонажи, статы, прогресс команд
2. Контроль очередности ходов команд
3. Проверка статов и генерация результатов действий
4. Блокировка действий после провала
5. Отправка контента на клиент (задники, описание, действия, результаты)
6. Управление ходами: уникальные и общие комнаты
7. Отправка прогресса команд и информации для интерфейса участников и ГМ

---

## **4. Структура данных (примерно)**

### **4.1. Игрок**

```json
{
  "id": "player1",
  "name": "Имя",
  "role": "player",
  "team": "team1",
  "character": "image_id",
  "class": "warrior",
  "stats": {
    "strength": 5,
    "dexterity": 3,
    "intelligence": 4
  },
  "ready": false
}
```

### **4.2. Комната**

```json
{
  "id": "room1",
  "type": "unique", 
  "background": "bg_image_id",
  "description": "Описание комнаты",
  "technique": "Техника левел дизайна, которая была применена в комнате"
  "actions": [
    {
      "id": "action1",
      "name": "Попробовать открыть дверь",
      "stat": "strength",
      "available": true,
      "action_result" : {
        "perfect": "Дверь открылась",
        "success": "Дверь едва открылась",
        "failure": "Дверь закрыта"
      }
    }
  ],
  "required_successes": 6 // если комната общая
}

```

### **4.3. Команда**

```json
{
  "id": "team1",
  "name": "Команда А",
  "players": ["player1", "player2"],
  "progress": {
    "current_room": "room1",
    "successful_actions": 3,
    "failture_sctions": 8
  }
}
```

---

## **5. Прогресс и обратная связь**

-   Участники видят: описание комнаты, список участников и статов, доступные действия
-   ГМ видит: описание комнаты, список участников и статов, активные действия команд, результаты действий и применённые приёмы левел-дизайна

---

## **6. Требования к интерфейсу**

-   Минимализм и лаконичность
-   Основной контент: задник, описание, действия
-   Кнопки действий: участники → неактивны, ГМ → активны
-   Панель команд и участников всегда видна

---

## **7. Технический стек**

-   **Frontend:** на усмотрение разработчика (любая JS/HTML/CSS реализация)
-   **Backend:** Node.js + WebSocket
-   **Хранение данных:** JSON

---
